import {
  t
} from "./chunk-TSDU5FXE.js";
import {
  i,
  r
} from "./chunk-Z2A222O3.js";
import {
  Ye
} from "./chunk-JT5MNXX3.js";
import "./chunk-PEVRDPML.js";
import "./chunk-4KVDFBS3.js";
import "./chunk-7FHK22OY.js";
import "./chunk-HWGSEVKH.js";
import "./chunk-4LAB32KQ.js";
import "./chunk-JOUVYFAY.js";
import "./chunk-44OKV7LZ.js";
import "./chunk-R5QEGUQL.js";
import "./chunk-6WVUJOLD.js";
import "./chunk-YQHLNRT3.js";
import "./chunk-G7HNCC5G.js";
import "./chunk-QLSJI3DL.js";
import "./chunk-3VG7BBW5.js";
import "./chunk-ZWAL4BY6.js";
import "./chunk-KS56T55N.js";
import "./chunk-FK3WBTHH.js";
import "./chunk-TGJTL3DX.js";
import "./chunk-ZROOJR26.js";
import "./chunk-27HW4PAJ.js";
import "./chunk-VL6ABOSV.js";
import "./chunk-2KG6WO5I.js";
import "./chunk-D4RMC5GM.js";
import "./chunk-BWQFRI3E.js";
import "./chunk-F23MXZYK.js";
import "./chunk-LZTCFOLV.js";
import "./chunk-J6MQFQDT.js";
import "./chunk-RAXTPGM6.js";
import "./chunk-FFVHLGAP.js";
import "./chunk-GCLTWKVB.js";
import "./chunk-LVOCICBG.js";
import "./chunk-TNYXYQXK.js";
import "./chunk-WANI2G7M.js";
import "./chunk-2O2K2GAF.js";
import "./chunk-LJBNLWJN.js";
import "./chunk-RKXU25GZ.js";
import "./chunk-3GIIPEHS.js";
import "./chunk-SCNACYSF.js";
import "./chunk-Q7YUVHCX.js";
import "./chunk-MG7UOFLP.js";
import "./chunk-ACXFIEER.js";
import "./chunk-PXJIE4N5.js";
import "./chunk-5LA23O74.js";
import "./chunk-4A3WH4AR.js";
import "./chunk-4KREATVZ.js";
import "./chunk-YLPB3XO6.js";
import "./chunk-DMXES2BK.js";
import {
  d
} from "./chunk-ONZPKEDE.js";
import "./chunk-BTTTF5H4.js";
import "./chunk-MEC6IDRX.js";
import "./chunk-ZH6PYRVF.js";
import "./chunk-MHM4GDCM.js";
import "./chunk-363AT5UF.js";
import "./chunk-CQ2PC3VP.js";
import "./chunk-XUYUNZTH.js";
import "./chunk-HCXUWF52.js";
import "./chunk-ZCYDEY6S.js";
import "./chunk-POMCHIIZ.js";
import "./chunk-5GAOP2C3.js";
import "./chunk-6WASKRTP.js";
import "./chunk-37HZDVD7.js";
import "./chunk-3S47CK7X.js";
import "./chunk-7FOAM45I.js";
import "./chunk-EMADK6RJ.js";
import "./chunk-VY225BNN.js";
import "./chunk-FBQYHS7L.js";
import "./chunk-LGG5FPVD.js";
import "./chunk-TOMXDOXB.js";
import "./chunk-VTPZW6H5.js";
import "./chunk-DWXK7D3B.js";
import "./chunk-EW3YCVZI.js";
import "./chunk-WZ7EFR6C.js";
import "./chunk-CVABZLLM.js";
import "./chunk-DDEXP7LW.js";
import "./chunk-KWOLBNIK.js";
import "./chunk-JLW377TH.js";
import "./chunk-TGMFGDP6.js";
import "./chunk-JST5QDP2.js";
import "./chunk-A4BGGF5Z.js";
import "./chunk-QM4DRRZI.js";
import "./chunk-LPMFP5XM.js";
import "./chunk-775V3L2A.js";
import "./chunk-AI2O2GKK.js";
import "./chunk-ANGUSND2.js";
import "./chunk-WF2ACUGU.js";
import "./chunk-4NGIUHKX.js";
import "./chunk-FF44HCOD.js";
import "./chunk-AVY6RZDG.js";
import {
  b
} from "./chunk-5X74MKXM.js";
import "./chunk-LCBD3JEK.js";
import "./chunk-IPFYNOOY.js";
import "./chunk-PUC7IJYJ.js";
import "./chunk-ESU5C3MV.js";
import "./chunk-TYJOGWKZ.js";
import "./chunk-4WO6KUCB.js";
import "./chunk-2Y4TRKRB.js";
import "./chunk-XEBZUAYT.js";
import "./chunk-4WERUJEK.js";
import "./chunk-YFLBSX2D.js";
import "./chunk-6REABBOQ.js";
import "./chunk-STBNLAGT.js";
import {
  o
} from "./chunk-HSI6V34N.js";
import "./chunk-QTWG47SG.js";
import "./chunk-WJGG35K6.js";
import "./chunk-ZDVQNOKR.js";
import {
  m
} from "./chunk-Y3AY7I5U.js";
import "./chunk-SUVHJC6Z.js";
import "./chunk-WJNMFEXQ.js";
import "./chunk-XCRRZPKE.js";
import "./chunk-WZBMMIVS.js";
import "./chunk-WLGGSXQY.js";
import "./chunk-T7KGE6VP.js";
import "./chunk-T57WVICI.js";
import "./chunk-W633AKTD.js";
import "./chunk-UCMTPLHQ.js";
import "./chunk-G34KEQQG.js";
import "./chunk-5EWD56QJ.js";
import "./chunk-3UHB6K6P.js";
import "./chunk-ZYOZHQFS.js";
import "./chunk-MLOZK7WX.js";
import "./chunk-XWXWIBVO.js";
import "./chunk-NTUX5M6N.js";
import "./chunk-FIBMMWXR.js";
import "./chunk-53ZTROGC.js";
import "./chunk-PUM22WTC.js";
import "./chunk-K2PILHWE.js";
import "./chunk-JLFV7EBO.js";
import "./chunk-BV7O6P7Z.js";
import "./chunk-JLFSX3JT.js";
import "./chunk-IP4HFFRO.js";
import {
  C
} from "./chunk-PAGKMWJH.js";
import "./chunk-CHL75CEP.js";
import "./chunk-SQ6MYL73.js";
import "./chunk-HP7OWCUK.js";
import "./chunk-SWBNCJYN.js";
import "./chunk-NENDDUWH.js";
import "./chunk-YUVX6H42.js";
import "./chunk-5ESATYIQ.js";
import "./chunk-RDUV6YP6.js";
import "./chunk-6P7HXSJ6.js";
import "./chunk-LTDNORB5.js";
import "./chunk-HQLPC24M.js";
import "./chunk-H7PA52WJ.js";
import "./chunk-PODRVOXS.js";
import "./chunk-NALU24NB.js";
import "./chunk-REAPFM7O.js";
import "./chunk-UNGOQUF2.js";
import "./chunk-YSPSOPLL.js";
import "./chunk-AJSC5XSW.js";
import "./chunk-I4HN3ELT.js";
import "./chunk-ACGZOBZ6.js";
import "./chunk-7LY6RE4Z.js";
import "./chunk-AIKBABBU.js";
import "./chunk-A42OBC4U.js";
import "./chunk-BDBI2KVA.js";
import "./chunk-7AOPU62X.js";
import "./chunk-WE4EKKVR.js";
import "./chunk-UFBX3XSC.js";
import "./chunk-F7TCEOHX.js";
import "./chunk-5BULKNR2.js";
import {
  p
} from "./chunk-RYSF6YCR.js";
import "./chunk-4LTV6KQ5.js";
import "./chunk-PPIAYGRE.js";
import "./chunk-L7T5Z7MG.js";
import "./chunk-WCGYJMU3.js";
import "./chunk-577U4F6A.js";
import "./chunk-HS4XAAAN.js";
import "./chunk-STW6HRXO.js";
import "./chunk-7QTMSBS3.js";
import "./chunk-M6FNW7GP.js";
import "./chunk-5HI5HAKB.js";
import {
  a,
  n2 as n,
  s2 as s
} from "./chunk-CWMZW2S5.js";
import "./chunk-2N2W26AY.js";
import "./chunk-JVWSFFO4.js";

// node_modules/@arcgis/core/arcade.js
var y = null;
function f(e, t2, a2, n2 = {}) {
  const o2 = t2.elementType, c = "value", i2 = "array" === o2.type ? [{ name: c, type: o2.type, elementType: o2.elementType }] : "dictionary" === o2.type ? [{ name: c, type: o2.type, properties: o2.properties }] : [{ name: c, type: o2.type }];
  return new t(e.map((e2) => {
    const t3 = {};
    return g(t3, i2, { [c]: e2 }, a2, n2), t3[c];
  }));
}
function d2(e, t2, r2 = {}) {
  const a2 = e instanceof d ? new Ye({ source: e.features, geometryType: e.geometryType, fields: e.fields, spatialReference: e.spatialReference }) : e;
  return t2.constructFeatureSet(a2, r2.spatialReference, null, true, r2.lruCache, r2.interceptor);
}
function b2(e, t2, r2 = {}) {
  const { spatialReference: a2, interceptor: n2, lruCache: o2 } = r2;
  return "string" == typeof e ? t2.createFeatureSetCollectionFromService(e, a2, o2, n2) : t2.createFeatureSetCollectionFromMap(e, a2, o2, n2);
}
function v(e, t2, r2, a2 = {}) {
  const n2 = {};
  return g(n2, t2.properties, e, r2, a2), new y.Dictionary(n2);
}
function g(e, r2, a2, n2, o2 = {}) {
  const c = {};
  for (const t2 of Object.keys(a2)) c[t2.toLowerCase()] = a2[t2];
  for (const s2 of r2) {
    const r3 = s2.name.toLowerCase();
    if (o2.variablesPreProcessed) e[r3] = c[r3];
    else switch (s2.type) {
      case "array": {
        const t2 = c[r3];
        e[r3] = null == t2 ? null : f(t2, s2, n2, o2);
        break;
      }
      case "feature": {
        const t2 = c[r3];
        e[r3] = null == t2 ? null : y.Feature.createFromGraphic(t2, o2 == null ? void 0 : o2.timeZone);
        break;
      }
      case "featureSet": {
        const t2 = c[r3];
        e[r3] = null == t2 ? null : n2 ? d2(t2, n2, o2) : null;
        break;
      }
      case "featureSetCollection": {
        const t2 = c[r3];
        e[r3] = null == t2 ? null : n2 ? b2(t2, n2, o2) : null;
        break;
      }
      case "dictionary": {
        const t2 = c[r3];
        e[r3] = null == t2 ? null : v(t2, s2, n2, o2);
        break;
      }
      case "date": {
        const a3 = c[r3];
        e[r3] = a3 ? a3 instanceof m ? a3 : (o2 == null ? void 0 : o2.timeZone) ? m.dateJSAndZoneToArcadeDate(a3, o2 == null ? void 0 : o2.timeZone) : m.dateJSToArcadeDate(a3) : null;
        break;
      }
      case "dateOnly": {
        const t2 = c[r3];
        e[r3] = t2 ? t2 instanceof i ? t2 : i.fromReader(t2) : null;
        break;
      }
      case "time": {
        const t2 = c[r3];
        e[r3] = t2 ? t2 instanceof r ? t2 : r.fromReader(t2) : null;
        break;
      }
      case "knowledgeGraph":
      case "geometry":
      case "boolean":
      case "text":
      case "number":
        e[r3] = c[r3];
        break;
      case "voxel": {
        const t2 = c[r3];
        e[r3] = null == t2 ? null : new y.Voxel(t2, o2 == null ? void 0 : o2.timeZone);
        break;
      }
    }
  }
}
function S(e, t2) {
  for (const r2 of e) t2.push(r2), "dictionary" === r2.type && S(r2.properties, t2);
  return t2;
}
function w(e, t2, r2, a2, n2) {
  const { spatialReference: o2, interceptor: c, lruCache: i2, console: p2, abortSignal: s2, timeZone: l, services: m2 = { portal: C.getDefault() } } = r2, y2 = { vars: {}, spatialReference: o2, interceptor: c, timeZone: l, lrucache: i2, useAsync: n2, services: m2, console: p2, abortSignal: s2 };
  return t2 ? (g(y2.vars, e.variables, t2, a2, r2), y2) : y2;
}
function $(t2, r2) {
  switch (r2.getArcadeType(t2)) {
    case "number":
    case "text":
    case "boolean":
    case "point":
    case "polygon":
    case "polyline":
    case "multipoint":
    case "extent":
      return t2;
    case "date":
      return t2.toJSDate();
    case "time":
    case "dateOnly":
      return t2.toString();
    case "feature": {
      const r3 = (t2.type, t2), a2 = "geometry" in r3 ? r3.geometry() : null, n2 = "readAttributes" in r3 ? r3.readAttributes() : r3.attributes;
      return new b({ geometry: a2, attributes: n2 });
    }
    case "dictionary": {
      const e = t2, a2 = e.attributes, n2 = {};
      for (const t3 of Object.keys(a2)) n2[t3] = $(e.field(t3), r2);
      return n2;
    }
    case "array":
      return ("toArray" in t2 ? t2.toArray() : t2).map((e) => $(e, r2));
  }
  return t2;
}
var h = { variables: [{ name: "$feature", type: "feature" }, { name: "$layer", type: "featureSet" }, { name: "$datastore", type: "featureSetCollection" }, { name: "$map", type: "featureSetCollection" }, { name: "$userInput", type: "geometry" }, { name: "$graph", type: "knowledgeGraph" }, { name: "$view", type: "dictionary", properties: [{ name: "scale", type: "number" }, { name: "timeProperties", type: "dictionary", properties: [{ name: "currentStart", type: "date" }, { name: "currentEnd", type: "date" }, { name: "startIncluded", type: "boolean" }, { name: "endIncluded", type: "boolean" }] }] }] };
var C2 = { variables: [{ name: "$feature", type: "feature" }, { name: "$aggregatedFeatures", type: "featureSet" }, { name: "$view", type: "dictionary", properties: [{ name: "scale", type: "number" }, { name: "timeProperties", type: "dictionary", properties: [{ name: "currentStart", type: "date" }, { name: "currentEnd", type: "date" }, { name: "startIncluded", type: "boolean" }, { name: "endIncluded", type: "boolean" }] }] }] };
var x = { variables: [{ name: "$voxel", type: "voxel" }] };
var j = /* @__PURE__ */ new Map([["aggregate-field", { variables: [{ name: "$feature", type: "feature" }] }], ["form-constraint", { variables: [{ name: "$feature", type: "feature" }] }], ["feature-z", { variables: [{ name: "$feature", type: "feature" }] }], ["field-calculation", { variables: [{ name: "$feature", type: "feature" }, { name: "$datastore", type: "featureSetCollection" }] }], ["form-calculation", { variables: [{ name: "$feature", type: "feature" }, { name: "$originalFeature", type: "feature" }, { name: "$layer", type: "featureSet" }, { name: "$featureSet", type: "featureSet" }, { name: "$datastore", type: "featureSetCollection" }, { name: "$map", type: "featureSetCollection" }, { name: "$editContext", type: "dictionary", properties: [{ name: "editType", type: "text" }] }] }], ["labeling", { variables: [{ name: "$feature", type: "feature" }, { name: "$view", type: "dictionary", properties: [{ name: "scale", type: "number" }, { name: "timeProperties", type: "dictionary", properties: [{ name: "currentStart", type: "date" }, { name: "currentEnd", type: "date" }, { name: "startIncluded", type: "boolean" }, { name: "endIncluded", type: "boolean" }] }] }] }], ["popup", h], ["popup-element", h], ["popup-feature-reduction", C2], ["popup-element-feature-reduction", C2], ["visualization", { variables: [{ name: "$feature", type: "feature" }, { name: "$view", type: "dictionary", properties: [{ name: "scale", type: "number" }, { name: "timeProperties", type: "dictionary", properties: [{ name: "currentStart", type: "date" }, { name: "currentEnd", type: "date" }, { name: "startIncluded", type: "boolean" }, { name: "endIncluded", type: "boolean" }] }] }] }], ["popup-voxel", x], ["popup-element-voxel", x]]);
function A(e) {
  "feature-reduction-popup" === e ? (p(n.getLogger("esri.arcade"), 'profile name: "feature-reduction-popup"', { replacement: '"popup-feature-reduction"', version: "4.32", warnOnce: true }), e = "popup-feature-reduction") : "feature-reduction-popup-element" === e && (p(n.getLogger("esri.arcade"), 'profile name: "feature-reduction-popup-element"', { replacement: '"popup-element-feature-reduction"', version: "4.32", warnOnce: true }), e = "popup-element-feature-reduction");
  const t2 = j.get(e);
  if (!t2) {
    const t3 = Array.from(j.keys()).map((e2) => `'${e2}'`).join(", ");
    throw new s("createArcadeProfile:invalid-profile-name", `Invalid profile name '${e}'. You must specify one of the following values: ${t3}`);
  }
  return a(t2);
}
async function k(e, t2, r2 = {}) {
  y || (y = await o());
  const { arcade: a2, arcadeUtils: o2 } = y, { loadScriptDependencies: c, referencesMember: i2, scriptIsAsync: p2 } = a2, s2 = S(t2.variables, []), u = s2.filter((e2) => "featureSet" === e2.type || "featureSetCollection" === e2.type).map((e2) => e2.name.toLowerCase()), l = a2.parseScript(e, u);
  if (!l) throw new s("arcade:invalid-script", "Unable to create SyntaxTree");
  const f2 = o2.extractFieldNames(l), d3 = a2.scriptTouchesGeometry(l), b3 = s2.map((e2) => e2.name.toLowerCase()).filter((e2) => i2(l, e2)), v2 = p2(l, u);
  await c(l, v2, u);
  const g2 = { vars: {}, spatialReference: null, useAsync: v2 };
  for (const n2 of b3) g2.vars[n2] = "any";
  const { lruCache: h2 } = r2, C3 = a2.compileScript(l, g2), x2 = a2.featureSetUtils(), { services: j2 } = r2;
  return { execute: (e2, r3 = {}) => {
    if (v2) throw new s("arcade:invalid-execution-mode", "Cannot execute the script in synchronous mode");
    const a3 = C3(w(t2, e2, { lruCache: h2, ...r3 }, x2, v2));
    return r3.rawOutput ? a3 : $(a3, o2);
  }, executeAsync: async (e2, r3 = {}) => {
    const a3 = await C3(w(t2, e2, { lruCache: h2, services: j2, ...r3 }, x2, v2));
    return r3.rawOutput ? a3 : $(a3, o2);
  }, isAsync: v2, variablesUsed: b3, fieldsUsed: f2, geometryUsed: d3, syntaxTree: l };
}
export {
  k as createArcadeExecutor,
  A as createArcadeProfile
};
//# sourceMappingURL=arcade-BYOWNL3N.js.map
