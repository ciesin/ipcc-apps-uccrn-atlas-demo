import {
  de,
  n as n2
} from "./chunk-5XCTXK3E.js";
import "./chunk-YX6MRK66.js";
import "./chunk-GQZVNUA4.js";
import "./chunk-MV5XTDTW.js";
import "./chunk-D2KPWTH5.js";
import "./chunk-VWA3EWRM.js";
import "./chunk-RYF2HIUG.js";
import "./chunk-ZPDSNSZE.js";
import "./chunk-3SEDCXI3.js";
import "./chunk-ITFP5AXT.js";
import "./chunk-KMKEKOKG.js";
import "./chunk-4ATVMSVD.js";
import "./chunk-XXK557ZF.js";
import "./chunk-UPNK3SFT.js";
import "./chunk-Z7G6RNT2.js";
import "./chunk-HABQD3Y4.js";
import "./chunk-OJ5IBYG7.js";
import "./chunk-FSHULOB2.js";
import "./chunk-LTF4JXOW.js";
import "./chunk-CVEV6FRQ.js";
import "./chunk-PMUCRJCT.js";
import "./chunk-UQQJEYZO.js";
import "./chunk-VCN3W5DR.js";
import "./chunk-DYXUUD4L.js";
import "./chunk-W5EXEGLR.js";
import "./chunk-ENBV6NNC.js";
import "./chunk-D2SOLIKV.js";
import "./chunk-QHF36O7C.js";
import "./chunk-XNEUYQNE.js";
import "./chunk-5ZG44LB7.js";
import "./chunk-N7QOB7T5.js";
import "./chunk-3VWS6Q3L.js";
import "./chunk-JNU2FFP7.js";
import "./chunk-WVAH34JS.js";
import "./chunk-H263NTAU.js";
import "./chunk-36LA23CO.js";
import "./chunk-NMUUXFTE.js";
import "./chunk-F4RJF7LN.js";
import "./chunk-LZUCOHH2.js";
import "./chunk-NWA7NYLF.js";
import "./chunk-F7TFMQ3A.js";
import "./chunk-YRSM2W7P.js";
import "./chunk-EM6PL3GZ.js";
import "./chunk-J7454WTE.js";
import "./chunk-U6JFTJMZ.js";
import "./chunk-G2TQ7G44.js";
import "./chunk-RBVKDFFD.js";
import "./chunk-GNFRPKN6.js";
import "./chunk-6X7CIA5N.js";
import "./chunk-ZZ4UNY3F.js";
import "./chunk-GTAKWPJC.js";
import "./chunk-EYAQDXHE.js";
import "./chunk-HVQIKA6N.js";
import "./chunk-G3KHB63E.js";
import "./chunk-2DHEJENI.js";
import "./chunk-RD3QRDRK.js";
import "./chunk-EWSNAOW6.js";
import "./chunk-SRWZJODN.js";
import "./chunk-C2Y5RHRE.js";
import "./chunk-AI444EOP.js";
import "./chunk-CTBXY22F.js";
import "./chunk-PV4EUSKO.js";
import "./chunk-JXV2GGQH.js";
import "./chunk-ZRT3UCXK.js";
import "./chunk-ANT4QPJQ.js";
import "./chunk-HYJ4YR5G.js";
import "./chunk-5AJMZDUM.js";
import "./chunk-2MCNW6KC.js";
import "./chunk-CRKFUUKK.js";
import "./chunk-O2L6JAHP.js";
import "./chunk-LH36NQSN.js";
import "./chunk-K35H6D4D.js";
import "./chunk-UMYFDXOJ.js";
import "./chunk-67XXGAOA.js";
import "./chunk-4TZUFQZG.js";
import "./chunk-UQ4WWETM.js";
import "./chunk-HLOKDQU3.js";
import "./chunk-YIZAIKLK.js";
import "./chunk-KS56T55N.js";
import {
  d as d3
} from "./chunk-FK3WBTHH.js";
import "./chunk-ZROOJR26.js";
import "./chunk-BWQFRI3E.js";
import "./chunk-F23MXZYK.js";
import "./chunk-LZTCFOLV.js";
import "./chunk-RAXTPGM6.js";
import "./chunk-3GIIPEHS.js";
import "./chunk-SCNACYSF.js";
import "./chunk-Q7YUVHCX.js";
import "./chunk-MG7UOFLP.js";
import "./chunk-ACXFIEER.js";
import "./chunk-PXJIE4N5.js";
import "./chunk-5LA23O74.js";
import "./chunk-4A3WH4AR.js";
import "./chunk-4KREATVZ.js";
import "./chunk-YLPB3XO6.js";
import {
  d as d2
} from "./chunk-ONZPKEDE.js";
import "./chunk-BTTTF5H4.js";
import "./chunk-MEC6IDRX.js";
import "./chunk-ZH6PYRVF.js";
import "./chunk-MHM4GDCM.js";
import "./chunk-363AT5UF.js";
import "./chunk-CQ2PC3VP.js";
import "./chunk-XUYUNZTH.js";
import "./chunk-HCXUWF52.js";
import "./chunk-ZCYDEY6S.js";
import "./chunk-POMCHIIZ.js";
import "./chunk-5GAOP2C3.js";
import "./chunk-TOMXDOXB.js";
import "./chunk-VTPZW6H5.js";
import "./chunk-TGMFGDP6.js";
import "./chunk-D3HK4ZSW.js";
import "./chunk-QM4DRRZI.js";
import "./chunk-LPMFP5XM.js";
import "./chunk-AI2O2GKK.js";
import "./chunk-ANGUSND2.js";
import "./chunk-WF2ACUGU.js";
import "./chunk-4NGIUHKX.js";
import "./chunk-FF44HCOD.js";
import "./chunk-AVY6RZDG.js";
import "./chunk-JJAT7JGD.js";
import "./chunk-D4CSBMND.js";
import "./chunk-5X74MKXM.js";
import "./chunk-LCBD3JEK.js";
import "./chunk-IPFYNOOY.js";
import "./chunk-PUC7IJYJ.js";
import "./chunk-ESU5C3MV.js";
import "./chunk-TYJOGWKZ.js";
import "./chunk-4WO6KUCB.js";
import "./chunk-2Y4TRKRB.js";
import "./chunk-XEBZUAYT.js";
import "./chunk-4WERUJEK.js";
import "./chunk-YFLBSX2D.js";
import "./chunk-6REABBOQ.js";
import "./chunk-STBNLAGT.js";
import "./chunk-HSI6V34N.js";
import "./chunk-QTWG47SG.js";
import "./chunk-WJGG35K6.js";
import {
  n
} from "./chunk-ZDVQNOKR.js";
import "./chunk-Y3AY7I5U.js";
import "./chunk-SUVHJC6Z.js";
import "./chunk-WJNMFEXQ.js";
import "./chunk-XCRRZPKE.js";
import "./chunk-WZBMMIVS.js";
import "./chunk-WLGGSXQY.js";
import "./chunk-T7KGE6VP.js";
import "./chunk-T57WVICI.js";
import "./chunk-W633AKTD.js";
import "./chunk-UCMTPLHQ.js";
import "./chunk-G34KEQQG.js";
import "./chunk-5EWD56QJ.js";
import "./chunk-3UHB6K6P.js";
import "./chunk-ZYOZHQFS.js";
import "./chunk-MLOZK7WX.js";
import "./chunk-XWXWIBVO.js";
import "./chunk-FIBMMWXR.js";
import "./chunk-53ZTROGC.js";
import "./chunk-PUM22WTC.js";
import "./chunk-K2PILHWE.js";
import "./chunk-JLFV7EBO.js";
import "./chunk-BV7O6P7Z.js";
import "./chunk-JLFSX3JT.js";
import "./chunk-PAGKMWJH.js";
import "./chunk-CHL75CEP.js";
import "./chunk-SQ6MYL73.js";
import "./chunk-HP7OWCUK.js";
import "./chunk-SWBNCJYN.js";
import "./chunk-NENDDUWH.js";
import "./chunk-YUVX6H42.js";
import "./chunk-5ESATYIQ.js";
import "./chunk-RDUV6YP6.js";
import "./chunk-6P7HXSJ6.js";
import "./chunk-LTDNORB5.js";
import "./chunk-HQLPC24M.js";
import "./chunk-H7PA52WJ.js";
import "./chunk-PODRVOXS.js";
import "./chunk-NALU24NB.js";
import "./chunk-REAPFM7O.js";
import "./chunk-UNGOQUF2.js";
import {
  d
} from "./chunk-YSPSOPLL.js";
import "./chunk-AJSC5XSW.js";
import "./chunk-I4HN3ELT.js";
import "./chunk-ACGZOBZ6.js";
import "./chunk-7LY6RE4Z.js";
import "./chunk-AIKBABBU.js";
import "./chunk-A42OBC4U.js";
import "./chunk-BDBI2KVA.js";
import "./chunk-7AOPU62X.js";
import "./chunk-WE4EKKVR.js";
import "./chunk-UFBX3XSC.js";
import "./chunk-F7TCEOHX.js";
import "./chunk-5BULKNR2.js";
import {
  m
} from "./chunk-RYSF6YCR.js";
import {
  a3 as a
} from "./chunk-4LTV6KQ5.js";
import {
  r
} from "./chunk-PPIAYGRE.js";
import "./chunk-L7T5Z7MG.js";
import "./chunk-WCGYJMU3.js";
import "./chunk-577U4F6A.js";
import "./chunk-HS4XAAAN.js";
import "./chunk-STW6HRXO.js";
import "./chunk-7QTMSBS3.js";
import {
  e,
  t
} from "./chunk-M6FNW7GP.js";
import "./chunk-5HI5HAKB.js";
import {
  s2 as s
} from "./chunk-CWMZW2S5.js";
import "./chunk-2N2W26AY.js";
import "./chunk-JVWSFFO4.js";

// node_modules/@arcgis/core/views/layers/StreamLayerView.js
var r2 = (r3) => {
  let i = class extends r3 {
    resume() {
      this._isUserPaused = false, this.suspended || this._doResume();
    }
    pause() {
      this._isUserPaused = true, this.suspended || this._doPause();
    }
    disconnect() {
      this._doDisconnect();
    }
    connect() {
      this._doConnect();
    }
    clear() {
      this._doClear();
    }
    constructor(...s2) {
      super(...s2), this._isUserPaused = false, this.filter = null;
    }
    get connectionStatus() {
      return (this._isUserPaused || this.suspended) && "connected" === this._streamConnectionStatus ? "paused" : this._streamConnectionStatus;
    }
    _onSuspendedChange(s2) {
      s2 ? this._doPause() : this._isUserPaused || this._doResume();
    }
  };
  return r([m()], i.prototype, "_isUserPaused", void 0), r([m({ readOnly: true })], i.prototype, "connectionStatus", null), r([m({ type: d3 })], i.prototype, "filter", void 0), i = r([a("esri.views.layers.StreamLayerView")], i), i;
};

// node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js
var p = class extends r2(de) {
  constructor() {
    super(...arguments), this.pipelineConnectionStatus = "disconnected", this.pipelineErrorString = null;
  }
  initialize() {
    this.addHandles([d(() => this.layer.customParameters, async (e2) => {
      (await this.getWorker()).streamMessenger.updateCustomParameters(e2);
    }), this.layer.on("send-message-to-socket", async (e2) => {
      (await this.getWorker()).streamMessenger.sendMessageToSocket(e2);
    }), this.layer.on("send-message-to-client", async (e2) => {
      (await this.getWorker()).streamMessenger.sendMessageToClient(e2), this._isUserPaused && "type" in e2 && "clear" === e2.type && this.incrementSourceRefreshVersion();
    }), d(() => this.layer.purgeOptions, () => this._update()), d(() => this.suspended, this._onSuspendedChange.bind(this))], "constructor"), this._doResume();
  }
  destroy() {
    this._doPause();
  }
  get connectionError() {
    return this.pipelineErrorString ? new s("stream-controller", this.pipelineErrorString) : null;
  }
  on(e2, r3) {
    if (Array.isArray(e2)) return t(e2.map((e3) => this.on(e3, r3)));
    const n3 = ["data-received", "message-received"].includes(e2);
    n3 && this.getWorker().then((r4) => r4.streamMessenger.enableEvent(e2, true));
    const o = super.on(e2, r3), i = this;
    return e(() => {
      o.remove(), n3 && (i._workerProxy.closed || i.hasEventListener(e2) || i.getWorker().then((r4) => r4.streamMessenger.enableEvent(e2, false)));
    });
  }
  async queryLatestObservations(e2, t2) {
    var _a, _b, _c;
    if (!(((_a = this.layer.timeInfo) == null ? void 0 : _a.endField) || ((_b = this.layer.timeInfo) == null ? void 0 : _b.startField) || ((_c = this.layer.timeInfo) == null ? void 0 : _c.trackIdField))) throw new s("streamlayer-no-timeField", "queryLatestObservation can only be used with services that define a TrackIdField");
    const s2 = await this.getWorker();
    return n2(s2.features.executeQueryForLatestObservations(this._cleanUpQuery(e2), t2).then((e3) => {
      const r3 = d2.fromJSON(e3);
      return r3.features.forEach((e4) => {
        e4.layer = this.layer, e4.sourceLayer = this.layer;
      }), r3;
    }), new d2({ features: [] }));
  }
  detach() {
    super.detach(), this.pipelineConnectionStatus = "disconnected";
  }
  async queryObjectIds(e2, r3) {
    return (await super.queryObjectIds(e2, r3)).filter(n);
  }
  get _streamConnectionStatus() {
    return this.pipelineConnectionStatus;
  }
  _doPause() {
    null != this._refreshInterval && (clearInterval(this._refreshInterval), this._refreshInterval = null);
  }
  _doResume() {
    this._refreshInterval = setInterval(() => this.incrementSourceRefreshVersion(), this.layer.updateInterval);
  }
  _doDisconnect() {
    this.getWorker().then((e2) => e2.streamMessenger.disconnect()), this._doPause();
  }
  _doConnect() {
    this.getWorker().then((e2) => e2.streamMessenger.connect()), this.resume();
  }
  _doClear() {
    this.getWorker().then((e2) => e2.streamMessenger.clear()), null == this._refreshInterval && this.incrementSourceRefreshVersion();
  }
  _createClientOptions() {
    const e2 = super._createClientOptions(), r3 = this;
    return { ...e2, get container() {
      return r3.featureContainer;
    }, setProperty: (e3) => {
      this.set(e3.propertyName, e3.value);
    } };
  }
};
r([m()], p.prototype, "pipelineConnectionStatus", void 0), r([m()], p.prototype, "pipelineErrorString", void 0), r([m({ readOnly: true })], p.prototype, "connectionError", null), r([m({ readOnly: true })], p.prototype, "_streamConnectionStatus", null), p = r([a("esri.views.2d.layers.StreamLayerView2D")], p);
var d4 = p;
export {
  d4 as default
};
//# sourceMappingURL=StreamLayerView2D-3FIVGJM6.js.map
